import{r as a,o,j as e,T as A,ae as c,L as x,c as m,d as i}from"./index-BWK7iHxT.js";import{l as v}from"./DeleteDialog-DnRfuXBp.js";import{D as y}from"./DeleteDialog-sO22D6fc.js";const S=()=>{const[n,r]=a.useState([]),[h,p]=a.useState(""),[d,j]=a.useState(""),[g,f]=a.useState(!1);a.useEffect(()=>{p(JSON.parse(o("is_admin"))),j(JSON.parse(o("userId")))},[]);const l=async()=>{var s;try{const t=await m.get("/user/auth/users/");(t==null?void 0:t.status)===200&&((s=t.data)==null?void 0:s.length)>0?r(t.data):r([])}catch{i.error("Unable to load user details")}};a.useEffect(()=>{l()},[]);const u=s=>{console.log(s);const t=async()=>{};v.confirmAlert({customUI:({onClose:b})=>e.jsx(y,{onClose:b,callback:t,message:`you want to delete the ${s.userName}`})})},N=async s=>{try{const t=await m.put(`/user/auth/appAccess/${s.id}/`,{is_appAccess:!s.is_appAccess});t.status!==200&&i.error("Unable to active user"),t.status===200&&(i.success(`${s.userName} is status updated`),f(!s.is_appAccess),l())}catch{i.error("Unable to active user")}};return e.jsxs("div",{className:"container-fluid pt-5",children:[e.jsx("div",{className:"row px-3 px-lg-5",children:e.jsx("div",{className:"text-end d-flex justify-content-between",children:e.jsx(A,{title:"User's",cssClass:"fs-1 pageTitle"})})}),e.jsxs("div",{className:"row px-3 px-lg-5 py-4 table-responsive",children:[h?e.jsxs("table",{className:"table table-striped table-hover",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Email"}),e.jsx("th",{children:"Admin type"}),e.jsx("th",{children:"Active status"}),e.jsx("th",{children:" Admin Permissions"}),e.jsx("th",{children:"Action"})]})}),e.jsx("tbody",{children:n==null?void 0:n.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:`${s.is_admin?"text-danger":""}`,children:s.userName}),e.jsx("td",{className:`${s.is_admin?"text-danger":""}`,children:s.email}),e.jsx("td",{className:`${s.is_admin?"text-danger":""}`,children:s.is_admin?"Super Admin":"Maintainer"}),e.jsx("td",{className:`${s.is_admin?"text-danger":""}`,children:e.jsxs("span",{className:`badge ${c(s)?"bg-success":"bg-secondary text-mute"} fw-normal`,children:[c(s)?"Active":"In Active"," "]})}),e.jsx("td",{className:`${s.is_admin?"text-danger":""}`,children:s.id!==d&&!s.is_admin?e.jsx("input",{type:"checkbox",checked:c(s),readOnly:!0,onClick:()=>{N(s)}}):""}),e.jsx("td",{children:s.id!==d&&!s.is_admin?e.jsx(x,{to:"",onClick:()=>u(s),children:e.jsx("i",{className:"fa fa-trash-o fs-4 text-danger","aria-hidden":"true",title:"Delete"})}):""})]},s.id))})]}):e.jsx("h3",{children:"Not authorized to view this page "}),e.jsxs("div",{className:"text-center my-5",children:[g&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-black bg-warning p-2 fs-4",children:"you'll need to grant permission to access the app's pages"}),e.jsx("p",{className:"text-center",children:e.jsx("i",{className:"fa fa-arrow-down fs-1 text-warning","aria-hidden":"true"})})]}),e.jsx(x,{to:"/userPermission",className:"btn btn-outline ",children:"Go for Page Permissions"})]})]})]})};export{S as default};
