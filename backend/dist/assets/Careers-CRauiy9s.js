import{r as l,U as B,u as U,j as e,E as R,q as c,V as F,W as k,X as J,B as P,c as T,d as L,f as H,e as A,o as O,b as M,L as u,T as v,Y as q,Z as D,M as I,a as V,k as Q,$ as Y,Q as W}from"./index-BWK7iHxT.js";import"./Styled-BriefIntro-DpTy6njT.js";import{I as X}from"./ImgTitleIntoForm-bGCGObUS.js";import{B as Z}from"./index-Zr8zxzfx.js";import{C as z}from"./CustomPagination-CzwkxU7w.js";import{i as G,c as K}from"./dynamicFormFields-JEId_5aT.js";import{S as ee}from"./index-D85sR-zM.js";import{l as se}from"./DeleteDialog-DnRfuXBp.js";import{D as ae}from"./DeleteDialog-sO22D6fc.js";import{S as re}from"./SkeltonNews-Cyh8VZqK.js";import{C as te,a as le,b as ne}from"./Styled-CareerFilter-D7ZlkmRU.js";import"./FileUpload-BBAUjrX2.js";import"./Error-B_8W099F.js";import"./SkeletonImage-DKfKqy0G.js";import"./Styled-PageBanner-gSpUsEd9.js";const $=({editHandler:w,componentType:o,type:x,editPost:a,popupTitle:j})=>{const[S,h]=l.useState(""),[f,E]=l.useState(B()),{register:r,reset:n,handleSubmit:N}=U({defaultValues:l.useMemo(()=>a,[a])}),m=()=>{w(o,!1),document.body.style.overflow=""};l.useEffect(()=>{n(a)},[a]);const g=async i=>{let d="";try{i.description=S,i.id?(i.updated_by=f,d=await T.put(`/careers/updateCareer/${i.id}/`,i)):(i.created_by=f,d=await T.post("/careers/createCareer/",i)),(d.status===200||d.status===201)&&(h(""),n(),L.success("Career Values are updated successfully "),m())}catch{console.log("unable to save the career form")}},b=()=>{n(),h("")};return e.jsxs(e.Fragment,{children:[e.jsx(R,{closeHandler:m,title:j,type:x}),e.jsx("hr",{className:"m-0"}),e.jsx("div",{className:"container",children:e.jsx("div",{className:"row p-4",children:e.jsx("div",{className:"col-md-12 mb-5 mb-md-0",children:e.jsxs("form",{className:"g-3 mb-md-0",onSubmit:N(g),children:[e.jsx(c,{label:"Title",fieldName:"job_title",register:r,cssClass:"requiredField"}),e.jsx(c,{label:"Company name",fieldName:"company_name",register:r}),e.jsx(c,{label:"Location",fieldName:"job_location",register:r}),e.jsx(F,{label:"From Experience",fieldName:"experience_from",register:r,options:k(20)}),e.jsx(F,{label:"To Experience",fieldName:"experience_to",register:r,options:k(20)}),e.jsx(c,{label:"Education",fieldName:"education",register:r}),e.jsx(F,{label:"Openings",fieldName:"openings",register:r,options:k(10)}),e.jsx(c,{label:"Package",fieldName:"package",register:r}),e.jsx(c,{label:"Skills",fieldName:"skills",register:r}),e.jsx(c,{label:"No of Application",fieldName:"no_of_application",register:r}),e.jsx(c,{label:"Employment Type",fieldName:"employment_Type",register:r}),e.jsx(c,{label:"Mode of work",fieldName:"mode_of_work",register:r}),e.jsx(c,{label:"About company",fieldName:"about_company",register:r}),e.jsx(c,{label:"ContactEmail",fieldName:"contactEmail",type:"email",register:r}),e.jsxs("div",{className:"mb-3 row",children:[e.jsxs("label",{htmlFor:"",className:"col-sm-3 col-form-label text-start text-md-end",children:[" ","Posted On"]}),e.jsx("div",{className:"col-sm-5 mb-3",children:e.jsx("input",{type:"date",...r("posted_date"),name:"posted_date",className:"form-control p-2"})})]}),e.jsxs("div",{className:"mb-3 row",children:[e.jsx("label",{htmlFor:"",className:"col-sm-3 col-form-label text-start text-md-end",children:"Description"}),e.jsx("div",{className:"col-sm-9",children:e.jsx(J,{description:"description",initialText:a!=null&&a.description?a==null?void 0:a.description:"",RichEditorState:h})})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"d-flex justify-content-center flex-wrap flex-column flex-sm-row align-items-center gap-2",children:[a!=null&&a.id?"":e.jsx("button",{className:"btn btn-secondary m-3",onClick:b,children:"Clear"}),e.jsx("button",{className:"btn btn-primary",children:"Save"}),e.jsx(P,{type:"submit",cssClass:"btn btn-more",label:"Close",handlerChange:m})]})})]})})})})]})},ie=({addJobs:w,posts:o,setPosts:x,setPageloadResults:a})=>{const j={job:!1},{isLoading:S}=H(s=>s.loader),[h,f]=l.useState({}),[E,r]=l.useState(!1),{isAdmin:n,hasPermission:N}=A(),[m,g]=l.useState(j),b=O("access"),i=(s,t,p)=>{f(p),g(y=>({...y,[s]:t})),r(!E),document.body.style.overflow="hidden"};l.useEffect(()=>{m.job||d()},[m.job,w]);const d=async()=>{let s=null;try{b?(s=await T.get("/careers/createCareer/"),a(!0)):(s=await M.get("/careers/clientCareersList/"),a(!1)),x(s.data)}catch{console.log("Unable to get the Career data")}},_=(s,t)=>{const p=async()=>{(await T.delete(`/careers/updateCareer/${s}/`)).status===204&&(L.success(`${t} Career is delete successfully `),d())};se.confirmAlert({customUI:({onClose:y})=>e.jsx(ae,{onClose:y,callback:p,message:`deleting the ${t} image?`})})},C=async s=>{let t="";try{if(t=await T.patch(`/careers/publishCareers/${s.id}/`,{publish:!s.publish}),t.status===200){let p=t.data.careers;L.success(`Career ${p.publish?"published":"un published"} successfully`),d()}}catch{console.log("unable to save the career form")}};return e.jsxs(e.Fragment,{children:[S?e.jsx("div",{className:"row",children:[1,2,3,4].map((s,t)=>e.jsx("div",{className:"col-md-6 col-lg-3 mb-4 mb-lg-0",children:e.jsx(re,{})},t))}):"",(o==null?void 0:o.length)>0?o.map((s,t)=>e.jsxs("div",{className:"col-md-6 col-lg-3 mt-3 mt-md-4 position-relative",children:[e.jsx("div",{className:"d-flex gap-5 gap-sm-4 gap-md-3 gap-lg-3 justify-content-end mb-2 p-1",children:n&&N?e.jsxs(e.Fragment,{children:[e.jsx("div",{children:e.jsx(u,{to:"",onClick:()=>i("job",!0,s),className:" p-2",children:e.jsx("i",{className:"fa fa-pencil text-warning cursor-pointer fs-5","aria-hidden":"true"})})}),e.jsx("div",{children:e.jsx(u,{to:"",onClick:p=>_(s.id,s.job_title),className:" p-2",children:e.jsx("i",{className:"fa fa-trash-o fs-5 text-danger","aria-hidden":"true"})})}),e.jsx("div",{children:e.jsx(u,{to:`/career-details/${s.id}/`,className:"text-secondary",children:e.jsx("i",{className:"fa fa-expand","aria-hidden":"true"})})}),e.jsx("div",{className:"",children:e.jsx(u,{to:"",onClick:()=>C(s),children:s.publish?e.jsx("small",{className:"bg-success p-1 text-white px-2 rounded",children:"Published"}):e.jsx("small",{className:"bg-secondary p-1 text-white px-2 rounded",children:"Un Pub'd"})})})]}):e.jsx("div",{children:e.jsx(u,{to:`/career-details/${s.id}/`,className:"text-secondary",children:e.jsx("i",{className:"fa fa-expand","aria-hidden":"true"})})})}),e.jsxs("div",{className:"p-3 jobPost",children:[e.jsxs("small",{className:"d-block location mb-3",children:[e.jsx("i",{className:"fa fa-map-marker fs-4 me-1","aria-hidden":"true"})," ",s.job_location]}),e.jsx("div",{className:"mt-0 mb-3",children:e.jsx(v,{title:s.job_title,cssClass:"fs-5 fw-bold jobTitle"})}),e.jsxs("div",{className:"mt-0 mb-3",children:[e.jsx(v,{title:"Company",cssClass:"fw-bold fs-6"}),e.jsxs("p",{className:"m-0",children:[s.company_name," "]})]}),e.jsxs("div",{className:"",children:[e.jsx(v,{title:"Job Description",cssClass:"fw-bold fs-6"}),e.jsx("div",{className:"m-0",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:q(s==null?void 0:s.description)}})})]}),e.jsxs("div",{className:"d-block my-2",children:[e.jsx(v,{title:"Experience",cssClass:"fw-bold fs-6"}),s.experience_from?s.experience_from:0," to"," ",s.experience_to?s.experience_to:0," Years"]}),e.jsxs("small",{className:"d-block",children:[e.jsx(v,{title:"Posted on",cssClass:"fw-bold fs-6"}),D(s.posted_date)===0?"Today":e.jsxs(e.Fragment,{children:["["," ",e.jsx("strong",{className:"",children:D(s.posted_date)})," ","] days ago"]})]})]})]},s.id)):e.jsxs("div",{className:"text-center py-5",children:[!n&&e.jsx("p",{className:"text-center fs-4",children:"At present there are not news items are available."}),n&&N&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-center fs-4",children:"There are no news items found. Please create news items."}),e.jsxs(u,{to:"/login",className:"btn btn-primary fs-5 w-25",children:["Login to Add Careers"," ",e.jsx("i",{className:"fa fa-plus mx-2","aria-hidden":"true"})," "]})]})]}),m.job&&e.jsx("div",{className:"adminEditTestmonial selected ",children:e.jsx($,{editHandler:i,componentType:"job",popupTitle:"Career",editPost:h})}),E&&e.jsx(I,{})]})},ve=()=>{const w={addjob:!1,banner:!1,briefIntro:!1,about:!1,vision:!1,mission:!1},o="careers",{isAdmin:x,hasPermission:a}=A(),[j,S]=l.useState(w),[h,f]=l.useState(!1),[E,r]=l.useState([]),[n,N]=l.useState({}),[m,g]=l.useState(!1),[b,i]=l.useState(""),[d,_]=l.useState(1);l.useEffect(()=>{window.scrollTo(0,0)},[]),l.useEffect(()=>{V()},[]);const C=(t,p)=>{S(y=>({...y,[t]:p})),f(!h),document.body.style.overflow="hidden"},s=t=>{r(t.results.length>0?Y(t.results):[]),N(W(t)),_(1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"position-relative careersPage",children:[x&&a&&e.jsx(Q,{editHandler:()=>C("banner",!0)}),e.jsx(Z,{getBannerAPIURL:`banner/clientBannerIntro/${o}-banner/`,bannerState:j.banner})]}),j.banner&&e.jsx("div",{className:"adminEditTestmonial selected ",children:e.jsx(X,{editHandler:C,componentType:"banner",popupTitle:"Careers Banner",pageType:`${o}-banner`,imageLabel:"Banner Image",showDescription:!1,showExtraFormFields:K(`${o}-banner`),dimensions:G("banner")})}),e.jsx(te,{children:e.jsx("div",{className:"container p-5 py-3 careersFilter",children:e.jsx(le,{})})}),e.jsxs("div",{className:"container mt-4 my-md-5 careerItems",children:[x&&a&&e.jsx("div",{className:"text-end mb-4",children:e.jsxs(u,{to:"#",className:"btn btn-primary",onClick:()=>C("addjob",!0),children:["Add New Career"," ",e.jsx("i",{className:"fa fa-plus ms-2","aria-hidden":"true"})]})}),j.addjob&&e.jsx("div",{className:"adminEditTestmonial selected ",children:e.jsx($,{editHandler:C,componentType:"addjob",popupTitle:"Add Career Details",type:"add"})}),e.jsxs("div",{children:[e.jsxs(ne,{children:[e.jsxs("div",{className:"row mb-4 pb-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsx(v,{title:"Careers",cssClass:"fs-3 pageTitle"})}),e.jsx("div",{className:"col-md-6",children:e.jsx(ee,{setObject:s,clientSearchURL:"/careers/searchCareers/",adminSearchURL:"/careers/createCareer/",clientDefaultURL:"/careers/clientCareersList/",searchfiledDeatails:"Job Title / Comapny Name / Location ",setPageloadResults:g,setSearchquery:i,searchQuery:b})})]}),e.jsx("div",{className:"row",children:e.jsx(ie,{addJobs:j.addjob,posts:E,setPosts:s,setPageloadResults:g})})]}),e.jsx("div",{className:"my-3",children:n!=null&&n.total_count?e.jsx(z,{paginationData:n,paginationURL:x?"/careers/createCareer/":"/careers/clientCareersList/",paginationSearchURL:b?`/careers/searchCareers/${b}/`:x?"/careers/createCareer/":"/careers/clientCareersList/",searchQuery:b,setCurrentPage:_,currentPage:d,setResponseData:s,pageLoadResult:m}):""})]}),h&&e.jsx(I,{})]})]})};export{ve as default};
