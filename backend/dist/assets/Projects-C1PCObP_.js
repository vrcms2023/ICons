import{F as N,j as e,T as h,P as B,r as t,e as C,f as S,h as E,a0 as P,a1 as F,a as L,k as b,M as D}from"./index-BWK7iHxT.js";import{B as $,a as A}from"./index-CRPkYSRC.js";import{B as R}from"./index-Zr8zxzfx.js";import{i as H,c as M}from"./dynamicFormFields-JEId_5aT.js";import{I as O}from"./ImgTitleIntoForm-bGCGObUS.js";import"./Styled-BriefIntro-DpTy6njT.js";import"./Ancher-Cr_S9HGk.js";import"./SkeletonImage-DKfKqy0G.js";import"./Styled-PageBanner-gSpUsEd9.js";import"./FileUpload-BBAUjrX2.js";import"./Error-B_8W099F.js";import"./DeleteDialog-DnRfuXBp.js";const f=({projectList:i,projectType:n})=>{const r=N(),p=B();return e.jsxs("div",{className:"container my-5 pb-3",children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12 ",children:e.jsx(h,{title:i.length>0?i[0].projectCategoryName:"Ongoing Projects",cssClass:"blue-900 fs-5 mb-3"})})}),e.jsx("div",{className:"row",children:i.length>0?i.map(s=>e.jsx("div",{className:"col-md-3 mb-3",children:e.jsxs("div",{className:"position-relative box",children:[e.jsxs("div",{className:"infoStrip",children:[e.jsx(h,{title:s.projectTitle,cssClass:"text-white fs-5"}),e.jsx("button",{className:"btn btn-primary btn-sm",onClick:()=>r("/project-details",{state:{selectedPorject:n,projectid:s.id}}),children:"more details"})]}),s.imgs.length>0?e.jsx("img",{src:`${p}${s.imgs[0].path}`,alt:""}):e.jsx("img",{src:`${p}/media/images/dummy-image-square.png`,alt:""})]})},s.id)):""})]})},Z=()=>{const i={banner:!1,briefIntro:!1},n="projects",[r,p]=t.useState(i),[s,T]=t.useState(!1),{isAdmin:g,hasPermission:x}=C(),[m,v]=t.useState([]),[c,y]=t.useState([]),[l,I]=t.useState([]),{clientProjects:a}=S(o=>o.clientProjects),u=E();t.useEffect(()=>{a.length===0&&u(P())},[u,a]),t.useEffect(()=>{var o;if(((o=a==null?void 0:a.projectList)==null?void 0:o.length)>0){const d=F(a);v(d.completed),y(d.future),I(d.ongoing)}},[a]),t.useEffect(()=>{window.scrollTo(0,0)},[]),t.useEffect(()=>{L()},[]);const j=(o,d)=>{p(w=>({...w,[o]:d})),T(!s),document.body.style.overflow="hidden"};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"headerBottomMargin",children:[g&&x&&e.jsx(b,{editHandler:()=>j("banner",!0)}),e.jsx(R,{getBannerAPIURL:`banner/clientBannerIntro/${n}-banner/`,bannerState:r.banner}),r.banner&&e.jsx("div",{className:"adminEditTestmonial selected ",children:e.jsx(O,{editHandler:j,componentType:"banner",popupTitle:"Projects Banner",pageType:`${n}-banner`,imageLabel:"Project Banner Image",showDescription:!1,showExtraFormFields:M(`${n}-banner`),dimensions:H("banner")})})]}),g&&x&&e.jsx(b,{editHandler:()=>j("briefIntro",!0)}),e.jsx($,{introState:r.briefIntro,pageType:n,introTitleCss:"fs-3 fw-medium text-md-center",introSubTitleCss:"fw-medium text-muted text-md-center",introDecTitleCss:"fs-6 fw-normal w-75 m-auto text-md-center"}),(l==null?void 0:l.length)>0?e.jsx(f,{projectList:l,projectType:l}):"",(m==null?void 0:m.length)>0?e.jsx(f,{projectList:m,projectType:m}):"",(c==null?void 0:c.length)>0?e.jsx(f,{projectList:c,projectType:c}):"",r.briefIntro&&e.jsx("div",{className:"adminEditTestmonial selected ",children:e.jsx(A,{editHandler:j,popupTitle:"Project Details",componentType:"briefIntro",pageType:n})}),s&&e.jsx(D,{})]})};export{Z as default};
