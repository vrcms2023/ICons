import{f as $,e as P,r as i,a as _,j as e,k as x,T as v,L as k,g as H,b as M,$ as O,Q,c as q,d as G}from"./index-BWK7iHxT.js";import{B as J}from"./index-Zr8zxzfx.js";import{B as K,a as z}from"./index-CRPkYSRC.js";import{I as V}from"./ImgTitleIntoForm-bGCGObUS.js";import{A as W}from"./Ancher-Cr_S9HGk.js";import{i as y,c as X,n as Y}from"./dynamicFormFields-JEId_5aT.js";import{l as Z}from"./DeleteDialog-DnRfuXBp.js";import{D as ee}from"./DeleteDialog-sO22D6fc.js";import{N as se}from"./index-C4YU0TO1.js";import{S as te}from"./index-D85sR-zM.js";import{C as ae}from"./CustomPagination-CzwkxU7w.js";import{C as ie}from"./Styled-Casestudies-C8tXA8Ax.js";import{S as ne}from"./SkeletonImage-DKfKqy0G.js";import"./Styled-PageBanner-gSpUsEd9.js";import"./Styled-BriefIntro-DpTy6njT.js";import"./FileUpload-BBAUjrX2.js";import"./Error-B_8W099F.js";const ye=()=>{const N={banner:!1,briefIntro:!1,addSection:!1,editSection:!1},c="casestudies",{isLoading:h}=$(s=>s.loader),{isAdmin:n,hasPermission:o}=P(),[a,w]=i.useState(N),[u,g]=i.useState([]),[L,I]=i.useState(!1),[T,S]=i.useState({}),[l,A]=i.useState({}),[D,j]=i.useState(!1),[m,E]=i.useState(""),[R,b]=i.useState(1),p=s=>{g(s.results.length>0?O(s.results):[]),A(Q(s)),b(1)},d=(s,t,r)=>{w(f=>({...f,[s]:t})),I(!L),r!=null&&r.id?S(r):S({}),document.body.style.overflow="hidden"};i.useEffect(()=>{const s=async()=>{try{const t=await M.get("/caseStudies/clientCaseStudies/");(t==null?void 0:t.status)===200&&(p(t.data),j(1))}catch{console.log("unable to access ulr because of server is down")}};(!a.addSection||!a.editSection)&&s()},[a.addSection,a.editSection]),i.useEffect(()=>{_();const s=document.getElementById("KnowledgeHubnavbarDropdown");s&&s.classList.add("active")});const B=s=>{const t=s.id,r=s.case_studies_title,f=async()=>{if((await q.delete(`/caseStudies/updateCaseStudies/${t}/`)).status===204){const F=u.filter(U=>U.id!==t);g(F),G.success(`${r} is deleted`)}};Z.confirmAlert({customUI:({onClose:C})=>e.jsx(ee,{onClose:C,callback:f,message:`deleting the ${r} Service?`})})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"position-relative",children:[n&&o&&e.jsx(x,{editHandler:()=>d("banner",!0)}),e.jsx(J,{getBannerAPIURL:`banner/clientBannerIntro/${c}-banner/`,bannerState:a.banner})]}),a.banner&&e.jsx("div",{className:"adminEditTestmonial selected ",children:e.jsx(V,{editHandler:d,componentType:"banner",popupTitle:"Case Studies Banner",pageType:`${c}-banner`,imageLabel:"Banner Image",showDescription:!1,showExtraFormFields:X(`${c}-banner`),dimensions:y("banner")})}),n&&o&&e.jsx(x,{editHandler:()=>d("briefIntro",!0)}),e.jsx(K,{introState:a.briefIntro,pageType:c,introTitleCss:"fs-3 fw-medium text-md-center",introSubTitleCss:"fw-medium text-muted text-md-center",introDecTitleCss:"fs-6 fw-normal w-75 m-auto text-md-center"}),a.briefIntro&&e.jsx("div",{className:"adminEditTestmonial selected ",children:e.jsx(z,{editHandler:d,popupTitle:"Case Studies",componentType:"briefIntro",pageType:c})}),e.jsxs("div",{className:"container-fluid container-lg my-md-5 ",children:[n&&o&&e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-md-12",children:e.jsx("div",{className:"d-flex justify-content-end align-items-center mb-3",children:e.jsxs("button",{type:"submit",className:"btn btn-primary px-3",onClick:()=>d("addSection",!0),children:["Add New Casestudy",e.jsx("i",{className:"fa fa-plus ms-2","aria-hidden":"true"})]})})})}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-6 fs-3 mt-4 mt-md-0",children:e.jsx(v,{title:"Case Studies",cssClass:"fs-1 pageTitle"})}),e.jsx("div",{className:"col-md-6",children:e.jsx(te,{setObject:p,clientSearchURL:"/caseStudies/searchCaseStudies/",adminSearchURL:"/caseStudies/createCaseStudies/",clientDefaultURL:"/caseStudies/clientCaseStudies/",searchfiledDeatails:"Case studies Title / Case studies description ",setPageloadResults:j,setSearchquery:E,searchQuery:m})})]}),a.editSection||a.addSection?e.jsx("div",{className:"adminEditTestmonial selected ",children:e.jsx(se,{editHandler:d,category:"about",editCarousel:T,setEditCarousel:S,componentType:`${a.editSection?"editSection":"addSection"}`,imageGetURL:"caseStudies/createCaseStudies/",imagePostURL:"caseStudies/createCaseStudies/",imageUpdateURL:"caseStudies/updateCaseStudies/",imageDeleteURL:"caseStudies/updateCaseStudies/",imageLabel:"Image",showDescription:!1,showExtraFormFields:Y(),dimensions:y("aboutus")})}):"",e.jsx(ie,{children:e.jsxs("div",{className:"caseStudie my-5",children:[h?e.jsx("div",{className:"row",children:[1,2,3,4].map((s,t)=>e.jsx("div",{className:"col-12",children:e.jsx(ne,{})},t))}):"",u.length>0?u.map((s,t)=>e.jsxs("div",{className:`row mb-2 ${n?"border border-warning mb-3 position-relative":""} ${t%2===0?"normalCSS":"flipCSS"}`,children:[n&&o&&e.jsxs(e.Fragment,{children:[e.jsx(x,{editHandler:()=>d("editSection",!0,s)}),e.jsx(k,{className:"deleteSection",onClick:()=>B(s),children:e.jsx("i",{className:"fa fa-trash-o text-danger fs-4","aria-hidden":"true"})})]}),e.jsxs("div",{className:"col-sm-9 p-3 p-md-4 py-md-4 d-flex justify-content-center align-items-start flex-column caseStudieDetails",children:[s.case_studies_title?e.jsx(v,{title:s.case_studies_title,cssClass:"fs-4 fw-bold mb-2"}):"",e.jsx("div",{dangerouslySetInnerHTML:{__html:s.case_studies_description}}),e.jsx("div",{children:e.jsx(W,{AncherLabel:"More",AncherClass:"btn btn-outline d-flex gap-2 justify-content-center align-items-center",Ancherpath:`/casestudies-details/${s.id}/`,AnchersvgColor:"#17427C"})})]}),e.jsx("div",{className:"col-sm-3 d-none d-sm-flex justify-content-center p-3",children:e.jsx("img",{src:H(s.path),alt:"",className:"img-fluid rounded-circle border border-3 border-light shadow-lg img-thumbnail caseStudieImg"})})]},s.id)):e.jsx("p",{className:"text-center text-muted py-5",children:!h&&e.jsx("p",{children:"Please add page contents..."})})]})}),e.jsx("div",{children:l!=null&&l.total_count?e.jsx(ae,{paginationData:l,paginationURL:n?"/caseStudies/createCaseStudies/":"/caseStudies/clientCaseStudies/",paginationSearchURL:m?`/caseStudies/searchCaseStudies/${m}/`:n?"/caseStudies/createCaseStudies/":"/caseStudies/clientCaseStudies/",searchQuery:m,setCurrentPage:b,currentPage:R,setResponseData:p,pageLoadResult:D}):""})]})]})};export{ye as default};
