import{r as m,j as e,L as M,f as J,u as K,o as z,E as W,q as p,B as Q,m as Z,t as V,v as ee,c as S,d as X,s as se,p as ae,e as te,h as le,a as ne,w as G,b as oe,k as O,T as re,M as ie}from"./index-BWK7iHxT.js";import"./Styled-BriefIntro-DpTy6njT.js";import{A as de}from"./Alert-BuLPxxXd.js";import{B as ce}from"./index-Zr8zxzfx.js";import{D as me,C as pe,P as xe}from"./dnd.esm-DtnQK6qL.js";import{D as he}from"./DeleteDialog-sO22D6fc.js";import{l as fe}from"./DeleteDialog-DnRfuXBp.js";import{f as _,C as ue}from"./ContactForm-DYVepLWv.js";import{N as je}from"./NoteComponent-D3-ze1DQ.js";import{I as ge}from"./ImgTitleIntoForm-bGCGObUS.js";import{i as be,c as Ne}from"./dynamicFormFields-JEId_5aT.js";import"./SkeletonImage-DKfKqy0G.js";import"./Styled-PageBanner-gSpUsEd9.js";import"./FileUpload-BBAUjrX2.js";import"./Error-B_8W099F.js";const ve=m.forwardRef(({item:s,date:j,id:i,dragHandleProps:g,snapshot:o,handleCarouselEdit:b,thumbDelete:y,...d},N)=>e.jsx("li",{ref:N,...d,className:"card p-2 my-2 "+(o.isDragging?"hovering":""),children:e.jsx("div",{...g,children:e.jsxs("div",{className:"row position-reltive",children:[e.jsxs("div",{className:"col-8",children:[e.jsx("p",{className:"m-0 fw-bold",children:s==null?void 0:s.location_title}),e.jsxs("small",{children:[s==null?void 0:s.city," - ",s==null?void 0:s.postcode]})," ",e.jsx("br",{}),e.jsxs("small",{children:[s==null?void 0:s.state," "]})]}),e.jsxs("div",{className:"col-4 d-flex justify-content-around align-items-center flex-md-row gap-3",children:[e.jsx(M,{onClick:C=>b(C,s),children:e.jsx("i",{className:"fa fa-pencil fs-4 text-warning","aria-hidden":"true"})}),e.jsx(M,{onClick:C=>y(s==null?void 0:s.id,s==null?void 0:s.location_title),children:e.jsx("i",{className:"fa fa-trash fs-4 text-danger","aria-hidden":"true"})})]})]})})})),_e=m.forwardRef(({children:s,...j},i)=>e.jsx("ul",{ref:i,className:"addresslist",style:{height:"100%"},children:s})),ye=({editHandler:s,componentType:j,address:i,popupTitle:g})=>{var h,A,T,L,$,B,H,U,q;const{addressList:o}=J(n=>n.addressList),[b,y]=m.useState(""),{register:d,reset:N,handleSubmit:C,setValue:u,formState:{errors:a}}=K({}),[t,x]=m.useState(i),D=()=>{s(j,!1),document.body.style.overflow=""};m.useEffect(()=>{y(z("userName"))},[]);const k=(n,r)=>{n.preventDefault(),Object.keys(r).forEach(f=>{u(f,r[f])})},P=(n,r)=>{const c=async()=>{if((await S.delete(`address/updateAddress/${n}/`)).status===204){const v=t.filter(E=>E.id!==n);x(v)}};fe.confirmAlert({customUI:({onClose:f})=>e.jsx(he,{onClose:f,callback:c,message:`deleting the ${r} image?`})})},R=async n=>{let r="";try{n.id?(n.updated_by=b,r=await S.put(`/address/updateAddress/${n.id}/`,n)):(n.created_by=b,n.address_position=t.length,r=await S.post("/address/createAddress/",n),console.log("New Address",r)),(r.status===200||r.status===201)&&(N(),X.success("Address Values are updated successfully "),w(r.data.addressList))}catch{console.log("unable to save the footer form")}},w=n=>{let r=JSON.parse(JSON.stringify(t)),c=r.findIndex(v=>v.id===n.id);c>-1?r[c]=n:r.push(n);const f=se(r,"address_position");x(f)},I=async n=>{const{source:r,destination:c}=n;if(!c)return!0;let f=JSON.parse(JSON.stringify(t));const v=Z(f[0]),E=V(f,r.index,c.index),Y=ee(E,v),F=await l(Y);(F==null?void 0:F.length)>0&&x(F)};m.useEffect(()=>{(o==null?void 0:o.length)>0&&x(o)},[o]);const l=async n=>{var r;try{let c=await S.put("/address/updateindex/",n);if((r=c==null?void 0:c.data)!=null&&r.addressList)return c.data.addressList}catch{console.log("unable to save the footer form")}};return e.jsxs("div",{className:"",children:[e.jsx(W,{closeHandler:D,title:g}),e.jsx("hr",{className:"m-0 text-dark"}),e.jsx("form",{className:"",onSubmit:C(R),children:e.jsxs("div",{className:"container my-3",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-12 mb-md-0  ",children:[e.jsx(je,{note:"Use drag option to shuffle the addresses"}),e.jsx("div",{className:t.length>0&&"heightCtrl",children:e.jsx(me,{onDragEnd:I,children:e.jsx(pe,{droppableId:"address-wrapper",children:(n,r)=>e.jsxs(_e,{ref:n.innerRef,...n.droppableProps,children:[t.map((c,f)=>e.jsx(xe,{draggableId:`${c.id}`,index:f,children:(v,E)=>e.jsx(ve,{ref:v.innerRef,dragHandleProps:v.dragHandleProps,...v.draggableProps,snapshot:E,item:c,thumbDelete:P,handleCarouselEdit:k})},c.id)),n.placeholder]})})})})]}),e.jsxs("div",{className:"col-md-12",children:[e.jsx("p",{className:"text-dark fw-bold mt-3",children:"Address Form"}),e.jsx("hr",{className:"mb-3 text-dark"})]}),e.jsx("div",{className:"col-md-12 mb-md-0",children:e.jsxs("div",{className:"heightCtrl",children:[e.jsx(p,{label:"Company Name",fieldName:"company_name",register:d,validationObject:_.company_name,error:(h=a==null?void 0:a.company_name)==null?void 0:h.message,isRequired:!0}),e.jsx(p,{label:"Country",fieldName:"location_title",register:d,validationObject:_.location_title,error:(A=a==null?void 0:a.location_title)==null?void 0:A.message,isRequired:!0}),e.jsx(p,{label:"State",fieldName:"state",register:d}),e.jsx(p,{label:"City",fieldName:"city",register:d,validationObject:_.city,error:(T=a==null?void 0:a.city)==null?void 0:T.message,isRequired:!0}),e.jsx(p,{label:"Location",fieldName:"location",register:d}),e.jsx(p,{label:"Street",fieldName:"street",register:d}),e.jsx(p,{label:"Door Number",fieldName:"address_dr_no",register:d}),e.jsx(p,{label:"Email",fieldName:"emailid",register:d,validationObject:_.emailid,error:(L=a==null?void 0:a.emailid)==null?void 0:L.message,isRequired:!0}),e.jsx(p,{label:"Email 2",fieldName:"emailid_2",register:d,validationObject:_.emailid_2,error:($=a==null?void 0:a.emailid_2)==null?void 0:$.message,isRequired:!1}),e.jsx(p,{label:"Email 3",fieldName:"emailid_3",register:d,validationObject:_.emailid_2,error:(B=a==null?void 0:a.emailid_2)==null?void 0:B.message}),e.jsx(p,{label:"Phone",fieldName:"phonen_number",register:d,validationObject:_.phonen_number,error:(H=a==null?void 0:a.phonen_number)==null?void 0:H.message,isRequired:!0}),e.jsx(p,{label:"Phone Number 2",fieldName:"phonen_number_2",register:d,validationObject:_.phonen_number_2,error:(U=a==null?void 0:a.phonen_number_2)==null?void 0:U.message}),e.jsx(p,{label:"WhatsApp No.",fieldName:"phonen_number_3",register:d,validationObject:_.phonen_number_2,error:(q=a==null?void 0:a.phonen_number_2)==null?void 0:q.message})]})})]}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"d-flex justify-content-center flex-wrap flex-column flex-sm-row align-items-center gap-1 gap-md-3 my-3",children:[e.jsx("button",{type:"reset",className:"btn btn-secondary",children:"Clear"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Save"}),e.jsx(Q,{type:"submit",cssClass:"btn btn-more",label:"Close",handlerChange:D})]})})]})})]})},we=({editHandler:s,componentType:j,mapValues:i,popupTitle:g})=>{const o=()=>{s(j,!1),document.body.style.overflow=""},[b,y]=m.useState(""),d="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d15226.413145928846!2d78.441906!3d17.430816!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x80e4d67809745a48!2sHPR+INFRA+PROJECTS!5e0!3m2!1sen!2sin!4v1442574301202",[N,C]=m.useState(i!=null&&i.google_map_url?i==null?void 0:i.google_map_url:d);m.useEffect(()=>{y(z("userName"))},[]);const u=t=>{C(t.target.value)},a=async()=>{let t="";try{let x={google_map_url:N};i!=null&&i.id?(x.updated_by=b,x.id=i.id,t=await S.put(`/footer/updateGoogleMapURL/${i.id}/`,x)):(x.created_by=b,t=await S.post("/footer/createGoogleMapURL/",x)),(t.status===200||t.status===201)&&(X.success("Footer Values are updated successfully "),o())}catch{console.log("unable to save the footer form")}};return e.jsxs("div",{className:"",children:[e.jsx(W,{closeHandler:o,title:g}),e.jsx("hr",{className:"m-0"}),e.jsx("div",{className:"container my-3",children:e.jsxs("div",{className:"row",children:[e.jsxs("label",{htmlFor:"googlemap",className:"col-sm-12 col-form-label text-capitalize",children:["Google ",j]}),e.jsxs("div",{className:"col-sm-12",children:[e.jsx("textarea",{className:"form-control",id:"exampleFormControlTextarea1",rows:"8",name:"google_map_url",value:N||d,onChange:u}),e.jsx("small",{className:"mt-3 mb-2 fw-bold d-inline-block",children:'Example : Copy the google "Embed a map" script like below'}),e.jsx("code",{className:"d-block",children:'<iframe className="googlemap" src="https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d15226.413145928846!2d78.441906!3d17.430816!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x80e4d67809745a48!2sHPR+INFRA+PROJECTS!5e0!3m2!1sen!2sin!4v1442574301202" height="450" width="100%" > &;t;/iframe>'})]}),e.jsx("div",{className:"row mt-3",children:e.jsxs("div",{className:"d-flex justify-content-center flex-wrap flex-column flex-sm-row align-items-center gap-2",children:[e.jsx("button",{onClick:a,className:"btn btn-primary",children:"Save"}),e.jsx(Q,{type:"submit",cssClass:"btn btn-more",label:"Close",handlerChange:o})]})})]})})]})},Ce=ae.div`
  .contactPage {
    .contactAddress {
      color: ${({theme:s})=>s.textColor};
  
      i {
        color: ${({theme:s})=>s.iconColor};
      }
    }
    
    .quickContact {
      background: ${({theme:s})=>s.white};

      .formTitle {
        color: ${({theme:s})=>s.textColor};
      }
    }
  }
`,Ue=()=>{const s={banner:!1,briefIntro:!1,address:!1,contact:!1,map:!1},j="contactus",{isAdmin:i,hasPermission:g}=te(),[o,b]=m.useState(s),[y,d]=m.useState(!1),[N,C]=m.useState(!1),[u,a]=m.useState(""),{addressList:t}=J(l=>l.addressList),{register:x,reset:D,handleSubmit:k,formState:{errors:P}}=K({}),R=le();m.useEffect(()=>{ne()},[]),m.useEffect(()=>{(t==null?void 0:t.length)===0&&R(G())},[t==null?void 0:t.length]),m.useEffect(()=>{o.address||R(G())},[o==null?void 0:o.address]),m.useEffect(()=>{o.map||I()},[o.map]);const w=(l,h)=>{b(A=>({...A,[l]:h})),d(!y),document.body.style.overflow="hidden"},I=async()=>{var l;try{const h=await oe.get("footer/getGoogleMapURL/");if((l=h==null?void 0:h.data)!=null&&l.mapURL){const A=h.data.mapURL[0];a(A)}}catch{console.log("unable to access ulr because of server is down")}};return e.jsxs(Ce,{children:[e.jsxs("div",{className:"position-relative",children:[i&&g&&e.jsx(O,{editHandler:()=>w("banner",!0)}),e.jsx(ce,{getBannerAPIURL:`banner/clientBannerIntro/${j}-banner/`,bannerState:o.banner})]}),o.banner&&e.jsx("div",{className:"adminEditTestmonial selected ",children:e.jsx(ge,{editHandler:w,componentType:"banner",popupTitle:"Contact  Banner",pageType:`${j}-banner`,imageLabel:"Banner Image",showDescription:!1,showExtraFormFields:Ne(`${j}-banner`),dimensions:be("banner")})}),e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"row",children:e.jsxs("div",{className:"contactPage position-relative col-md-12 text-white blueBg-500 p-3 p-md-5",children:[i&&g&&e.jsx(O,{editHandler:()=>w("address",!0)}),o.address&&e.jsx("div",{className:"adminEditTestmonial selected ",children:e.jsx(ye,{editHandler:w,popupTitle:"Address Details",componentType:"address",address:t})}),e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"col-md-12 col-lg-8",children:e.jsx("div",{className:"row",children:t==null?void 0:t.map((l,h)=>e.jsxs("div",{className:`my-4 ${t.length===1?"col-md-12":t.length===2||t.length===3?"col-md-6":"col-md-3"}`,children:[e.jsx(re,{title:l.location_title,cssClass:"mb-2 fs-4 text-black"}),e.jsxs("div",{className:"mb-2 contactAddress",children:[e.jsx("p",{className:"m-0 fw-medium",children:l.company_name}),e.jsx("p",{className:"m-0",children:l.address_dr_no}),e.jsxs("p",{className:"m-0",children:[l.street," "]}),e.jsxs("p",{className:"m-0",children:[l.location," "]}),e.jsxs("p",{className:"m-0",children:[l.city," "]}),e.jsx("p",{className:"mb-3",children:l.state}),e.jsx("p",{className:"mt-2",children:l.phonen_number&&e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-phone-square fs-4 me-2","aria-hidden":"true"})," ",l.phonen_number]})}),e.jsx("p",{className:"mt-2",children:l.phonen_number_2&&e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-phone-square fs-4 me-2","aria-hidden":"true"})," ",l.phonen_number_2]})}),e.jsx("p",{className:"mt-2",children:l.phonen_number_3&&e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-whatsapp fs-4 me-2","aria-hidden":"true"})," ",l.phonen_number_3," "]})}),e.jsx("p",{className:"mt-0",children:l.emailid_2&&e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-envelope-o fs-4 me-2","aria-hidden":"true"})," ",l.emailid_2," "]})}),e.jsx("p",{className:"mt-0",children:l.emailid_3&&e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"fa fa-envelope-o fs-4 me-2","aria-hidden":"true"})," ",l.emailid_3," "]})})]},h)]}))})}),e.jsxs("div",{className:"col-md-12 col-lg-4 p-5 px-4 py-3  mb-md-5 quickContact",children:[N&&e.jsx(de,{mesg:"Thank you for contact us",cssClass:"alert text-white w-50 mx-auto mt-3 p-2 text-center bg-success"}),e.jsx(ue,{})]})]})})}),e.jsx("div",{className:"address",children:e.jsx("div",{className:"d-flex flex-wrap gap-4"})})]})}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12 p-0 position-relative",style:{bottom:"-10px"},children:[i&&g&&e.jsx(O,{editHandler:()=>w("map",!0)}),(u==null?void 0:u.google_map_url)&&e.jsx("iframe",{title:"Google map",className:"googlemap",src:u==null?void 0:u.google_map_url,height:"450",width:"100%"})]})})]}),o.map&&e.jsx("div",{className:"adminEditTestmonial selected ",children:e.jsx(we,{mapValues:u,editHandler:w,componentType:"map",popupTitle:"Google Map"})}),y&&e.jsx(ie,{})]})};export{Ue as default};
