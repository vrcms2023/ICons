import{r as a,e as D,a as F,j as e,k as C,L as B,T as I,a8 as P,M as j,m as M,s as H,Q as O}from"./index-BWK7iHxT.js";import{B as $}from"./index-Zr8zxzfx.js";import{S as k}from"./index-D85sR-zM.js";import{H as K}from"./HomeNews-ks0VNc2e.js";import{I as _}from"./ImgTitleIntoForm-bGCGObUS.js";import{N as Q}from"./index-C4YU0TO1.js";import{i as x,c as q,o as G}from"./dynamicFormFields-JEId_5aT.js";import{C as J}from"./CustomPagination-CzwkxU7w.js";import"./SkeletonImage-DKfKqy0G.js";import"./Styled-PageBanner-gSpUsEd9.js";import"./DeleteDialog-DnRfuXBp.js";import"./DeleteDialog-sO22D6fc.js";import"./dnd.esm-DtnQK6qL.js";import"./Ancher-Cr_S9HGk.js";import"./SkeltonNews-Cyh8VZqK.js";import"./FileUpload-BBAUjrX2.js";import"./Error-B_8W099F.js";const me=()=>{const b={addNews:!1,banner:!1,news:!1},t="news",[A,l]=a.useState([]),[N,S]=a.useState(!1),[n,L]=a.useState(b),{isAdmin:i,hasPermission:u}=D(),[d,y]=a.useState(!1),[v,z]=a.useState({}),[o,R]=a.useState({}),[T,h]=a.useState(!1),[r,U]=a.useState(""),[E,g]=a.useState(1);a.useEffect(()=>{F();const s=document.getElementById("KnowledgeHubnavbarDropdown");s&&s.classList.add("active")});const c=s=>{if((s==null?void 0:s.results.length)>0){const m=M(s.results[0]),w=H(s.results,m);l(w),R(O(s)),g(1)}else l([])},f=()=>{y(!d)};a.useEffect(()=>{window.scrollTo(0,0)},[]);const p=(s,m)=>{L(w=>({...w,[s]:m})),S(!N),document.body.style.overflow="hidden"};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"position-relative",children:[i&&u&&e.jsx(C,{editHandler:()=>p("banner",!0)}),e.jsx($,{getBannerAPIURL:`banner/clientBannerIntro/${t}-banner/`,bannerState:n.banner})]}),n.banner&&e.jsx("div",{className:"adminEditTestmonial  selected ",children:e.jsx(_,{editHandler:p,componentType:"banner",popupTitle:"News Banner",pageType:`${t}-banner`,imageLabel:"Banner Image",showDescription:!1,showExtraFormFields:q(`${t}-banner`),dimensions:x("banner")})}),e.jsxs("div",{className:"container my-4 newsAndUpdates",children:[i&&u&&e.jsx("div",{className:"text-end",children:e.jsxs(B,{to:"#",className:"btn btn-primary",onClick:()=>p("addNews",!0),children:["Add News",e.jsx("i",{className:"fa fa-plus ms-2","aria-hidden":"true"})]})}),e.jsxs("div",{className:"row mb-2 py-4",children:[e.jsx("div",{className:"col-md-8",children:e.jsx(I,{title:"News",cssClass:"",mainTitleClassess:"fs-4 fw-medium",subTitleClassess:""})}),e.jsx("div",{className:"col-md-4",children:e.jsx(k,{setObject:c,clientSearchURL:"/appNews/searchAppNews/",adminSearchURL:"/appNews/createAppNews/",clientDefaultURL:"/appNews/clientAppNews/",searchfiledDeatails:"News Title / News Description",setPageloadResults:h,setSearchquery:U,searchQuery:r})})]}),e.jsxs("div",{className:"row mb-5",children:[n.addNews&&e.jsx("div",{className:"adminEditTestmonial selected",children:e.jsx(Q,{editHandler:p,componentType:"addNews",popupTitle:"Add News",imageGetURL:"appNews/createAppNews/",imagePostURL:"appNews/createAppNews/",imageUpdateURL:"appNews/updateAppNews/",imageDeleteURL:"appNews/updateAppNews/",imageLabel:"Add News Image",showDescription:!1,showExtraFormFields:G(),dimensions:x("addNews")})}),e.jsx(K,{addNewsState:n.addNews,news:A,setNews:l,setResponseData:c,setPageloadResults:h,pagetype:t}),e.jsx("div",{children:o!=null&&o.total_count?e.jsx(J,{paginationData:o,paginationURL:i?"/appNews/createAppNews/":"/appNews/clientAppNews/",paginationSearchURL:r?`appNews/searchAppNews/${r}/`:i?"/appNews/createAppNews/":"/appNews/clientAppNews/",searchQuery:r,setCurrentPage:g,currentPage:E,setResponseData:c,pageLoadResult:T}):""})]})]}),d&&e.jsx(P,{obj:v,closeModel:f,flag:"news"}),d&&e.jsx(j,{closeModel:f}),N&&e.jsx(j,{})]})};export{me as default};
