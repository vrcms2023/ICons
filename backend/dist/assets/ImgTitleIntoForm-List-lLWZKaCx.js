import{r as o,o as M,j as e,E as Q,a4 as V,O as S,m as y,s as w,t as W,v as X,e as Y,g as Z,a5 as T,a6 as C,a7 as ee,L as I,c as se}from"./index-BWK7iHxT.js";import{l as te}from"./DeleteDialog-DnRfuXBp.js";import{F as ae}from"./FileUpload-BBAUjrX2.js";import{D as le}from"./DeleteDialog-sO22D6fc.js";import{D as re,C as ie,P as oe}from"./dnd.esm-DtnQK6qL.js";import{N as ne}from"./NoteComponent-D3-ze1DQ.js";const pe=({editHandler:t,componentType:c,popupTitle:d,getImageListURL:g,deleteImageURL:f,imagePostURL:h,imageUpdateURL:m,imageIndexURL:u,imageLabel:k="Add Images",extraFormParamas:A,titleTitle:E="Title",descriptionTitle:_="Description",showDescription:O,showExtraFormFields:P,dimensions:F,validTypes:L="image/png,image/jpeg"})=>{const $="a62d7759-a e6b-4e49-a129-1ee208c6789d",[K,U]=o.useState(""),[j,D]=o.useState([]),[de,B]=o.useState(!1),[l,p]=o.useState([]),[H,me]=o.useState({id:$}),[G,b]=o.useState({}),N=()=>{t(c,!1),document.body.style.overflow=""};o.useEffect(()=>{U(M("userName"))},[]),o.useEffect(()=>{(async()=>{try{const s=await S.get(g);if((s==null?void 0:s.status)===200){let a=Object.keys(s.data);if(a.length>1){const i=y(s.data.results[0]),n=w(s.data.results,i);p(n)}else{const i=y(s.data[a][0]),n=w(s.data[a],i);p(n)}}}catch{console.log("unable to access ulr because of server is down")}})()},[j,g]);const R=(r,s)=>{r.preventDefault(),window.scrollTo(0,0),b(s)},q=(r,s)=>{const a=async()=>{if((await S.delete(`${f}${r}/`)).status===204){const n=j.filter(v=>v.id!==r);D(n),b({})}};te.confirmAlert({customUI:({onClose:i})=>e.jsx(le,{onClose:i,callback:a,message:`deleting the ${s} image?`})})},z=async r=>{const{source:s,destination:a}=r;if(!a)return!0;const i=y(l[0]),n=W(l,s.index,a.index),v=X(n,i),x=await J(v);(x==null?void 0:x.length)>0&&p(x)},J=async r=>{try{let s=await se.put(u,r),a=Object.keys(s==null?void 0:s.data);if(a.length>0)return s.data[a]}catch{console.log("unable to save clinet position")}};return e.jsxs("div",{children:[e.jsx(Q,{closeHandler:N,title:d}),e.jsx("hr",{className:"m-0"}),e.jsxs("div",{className:"container mt-4",children:[e.jsx(ne,{note:"Use drag option to shuffle the addresses"}),e.jsxs("div",{className:"row mt-3 d-flex flex-row-reverse",children:[(l==null?void 0:l.length)>0?e.jsx("div",{className:"heightCtrl imglist",children:e.jsx("div",{className:"container",children:e.jsx(re,{onDragEnd:z,children:l==null?void 0:l.map((r,s)=>e.jsx(ie,{droppableId:r.id,children:(a,i)=>e.jsxs("div",{ref:a.innerRef,style:V(i.isDraggingOver),...a.droppableProps,children:[e.jsx(ce,{item:r,index:s,componentType:c,handleCarouselEdit:R,thumbDelete:q},s),a.placeholder]})},s))})})}):"",e.jsx("hr",{className:""}),e.jsx("div",{className:`mb-5 mb-md-0 px-0 ${(l==null?void 0:l.length)>0,"col-md-12"}`,children:e.jsx(ae,{title:k,project:H,updated_by:K,category:c,gallerysetState:D,maxFiles:1,galleryState:j,validTypes:L,descriptionTitle:_,titleTitle:E,alternitivetextTitle:"Seo title",saveState:B,showDescription:O,buttonLable:"Save",editImage:G,setEditCarousel:b,imagePostURL:h,imageUpdateURL:m,extraFormParamas:A,showExtraFormFields:P,dimensions:F,closeHandler:N,scrollEnable:l.lengh>0})})]})]})]})},ce=({item:t,index:c,componentType:d,handleCarouselEdit:g,thumbDelete:f})=>{const{isAdmin:h}=Y();return e.jsx(oe,{isDragDisabled:!h||d==="gallery",draggableId:t.id,index:c,id:t.id,children:m=>e.jsx("div",{ref:m.innerRef,...m.draggableProps,...m.dragHandleProps,children:e.jsxs("div",{className:"row mb-4 p-2 slideItem",children:[e.jsxs("div",{className:"col-2 col-md-2",children:[e.jsx("i",{className:"fa fa-picture-o fs-2 d-lg-none","aria-hidden":"true"}),e.jsx("img",{src:t.path?Z(t.path):T(),alt:t.alternitivetext,className:"w-100 d-none d-lg-block"})]}),e.jsxs("div",{className:"col col-md-8 ",children:[e.jsx("h6",{className:"fw-bold m-0 fs-6",children:C(d,t)}),e.jsxs("small",{className:"description text-muted d-none d-md-block",children:[ee(d,t),t.carouseDescription&&t.carouseDescription,t.image_description&&t.image_description]})]}),e.jsxs("div",{className:"col-4 col-md-2 d-flex justify-content-around align-items-center flex-md-row gap-3",children:[e.jsx(I,{onClick:u=>g(u,t),children:e.jsx("i",{className:"fa fa-pencil fs-4 text-warning","aria-hidden":"true"})}),e.jsx(I,{onClick:u=>f(t.id,C(d,t)),children:e.jsx("i",{className:"fa fa-trash fs-4 text-danger","aria-hidden":"true"})})]})]},c)})},t.id)};export{pe as A};
