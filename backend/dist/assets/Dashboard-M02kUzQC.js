import{j as e,T as j,L as p,F as R,f as U,r as d,h as q,ad as O,B as G,c as z,d as y}from"./index-BWK7iHxT.js";import{D as C}from"./DeleteDialog-sO22D6fc.js";import{l as S}from"./DeleteDialog-DnRfuXBp.js";const g=({title:a,cssClass:o,projects:x,handleProjectDelete:h})=>e.jsxs(e.Fragment,{children:[e.jsx(j,{title:a,cssClass:"text-start fw-normal pt-3 mb-3 fs-6 text-dark"}),e.jsxs("table",{className:"table table-hover border ",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"",children:[e.jsx("th",{scope:"col",className:"py-2 bg-light fw-normal text-dark",children:"Name"}),e.jsx("th",{scope:"col",className:"py-2 bg-light fw-normal text-dark",children:"Status"}),e.jsx("th",{scope:"col",colSpan:2,className:"py-2 bg-light fw-normal text-dark",children:"Actions"})]})}),e.jsx("tbody",{children:x.length>0?x.map(r=>e.jsxs("tr",{children:[e.jsxs("td",{className:"align-middle",children:[r.projectTitle," "]}),e.jsx("td",{className:"align-middle",children:r.percentValue?e.jsxs("span",{className:`badge fw-normal ${parseInt(r.percentValue)===0?"bg-info":parseInt(r.percentValue)===100?"bg-success":"bg-warning"}`,children:[r.percentValue," %"]}):""}),e.jsx("td",{className:"align-middle",children:r.isActive?e.jsxs(e.Fragment,{children:[e.jsx(p,{to:`/editproject/${r.id}`,children:e.jsx("i",{className:"fa fa-pencil-square-o fs-4 text-muted me-4","aria-hidden":"true",title:"Edit"})}),e.jsx(p,{to:"",onClick:()=>h(r,r.id),children:e.jsx("i",{className:"fa fa-trash-o fs-4 text-danger","aria-hidden":"true",title:"Delete"})})]}):e.jsx(p,{to:"",onClick:()=>h(r,r.id),children:e.jsx("i",{className:"fa fa-undo fs-5 fw-bormal text-warning","aria-hidden":"true",title:"Revert"})})})]},r.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,children:e.jsx("p",{className:"text-center text-dark fw-bold",children:"No projects found, Add a new project"})})})})]})]}),b=({project:a,handleProjectDelete:o})=>{var x,h,r;return e.jsxs(e.Fragment,{children:[((x=a==null?void 0:a.ongoing)==null?void 0:x.length)>0?e.jsx("div",{className:"col-md-6 col-lg-4",children:e.jsx(g,{title:a.ongoing[0].projectCategoryName,cssClass:"text-success",projects:a.ongoing,handleProjectDelete:o})}):e.jsxs("div",{className:"col-md-6 col-lg-4",children:[e.jsx(j,{title:"Ongoing Projects",cssClass:"text-start fw-normal pt-3 mb-3 fs-6 text-dark"}),e.jsx("div",{className:"fw-bold d-flex justify-content-center align-items-center",children:"No project are available"})]}),((h=a==null?void 0:a.future)==null?void 0:h.length)>0?e.jsx("div",{className:"col-md-6 col-lg-4",children:e.jsx(g,{title:a.future[0].projectCategoryName,cssClass:"text-success",projects:a.future,handleProjectDelete:o})}):e.jsxs("div",{className:"col-md-6 col-lg-4",children:[e.jsx(j,{title:"Upcoming Projects",cssClass:"text-start fw-normal pt-3 mb-3 fs-6 text-dark"}),e.jsx("div",{className:"fw-bold d-flex justify-content-center align-items-center",children:"No project are available"})]}),((r=a==null?void 0:a.completed)==null?void 0:r.length)>0?e.jsx("div",{className:"col-md-6 col-lg-4",children:e.jsx(g,{title:a.completed[0].projectCategoryName,cssClass:"text-success",projects:a.completed,handleProjectDelete:o})}):e.jsxs("div",{className:"col-md-6 col-lg-4",children:[e.jsx(j,{title:"Completed Projects",cssClass:"text-start fw-normal pt-3 mb-3 fs-6 text-dark"}),e.jsx("div",{className:"fw-bold d-flex justify-content-center align-items-center",children:"No project are available"})]})]})},M=()=>{const a=R(),{projects:o}=U(s=>s.dashBoardProjects),[x,h]=d.useState([]),[r,k]=d.useState([]),[A,D]=d.useState([]),[L,T]=d.useState(!1),[B,E]=d.useState(!1),[V,$]=d.useState(!1),v=q();d.useEffect(()=>{v(O())},[v]),d.useEffect(()=>{var s;o&&((s=o==null?void 0:o.projectList)==null?void 0:s.length)>0&&N(o.projectList)},[o]);const N=s=>{const t=I(s);h(t.liveProject),k(t.archiveProject),D(t.publishedProject),m(t.liveProject,E),m(t.publishedProject,T),m(t.archiveProject,$)},m=(s,t)=>{var c,l,n;t(((c=s==null?void 0:s.completed)==null?void 0:c.length)>0||((l=s==null?void 0:s.future)==null?void 0:l.length)>0||((n=s==null?void 0:s.ongoing)==null?void 0:n.length)>0)},I=s=>{let t=s.filter(i=>i.publish),c=s.filter(i=>!i.publish),l=c.filter(i=>i.isActive),n=c.filter(i=>!i.isActive);return l=u(l),t=u(t),n=u(n),{liveProject:l,archiveProject:n,publishedProject:t}},u=s=>{const t=[];return s.forEach(c=>{t[c.projectCategoryValue]||(t[c.projectCategoryValue]=[]),t[c.projectCategoryValue].push(c)}),t},P=async(s,t,c,l)=>{var n,i;try{const f=await z.patch(`/project/archiveProject/${s}/`,t);((i=(n=f.data)==null?void 0:n.projectList)==null?void 0:i.length)>0&&(y.success(`${c.projectTitle} ${l}`),N(f.data.projectList))}catch{y.error(`${c.projectTitle} project unabel to process your request`)}},w=(s,t)=>{const c=async()=>{P(t,{isActive:!1,publish:!1},s,"project Deleted")};S.confirmAlert({customUI:({onClose:l})=>e.jsx(C,{onClose:l,callback:c,projectName:s.projectTitle})})},F=(s,t)=>{const c=async()=>{P(t,{isActive:!0},s,"project restore successfully")};S.confirmAlert({customUI:({onClose:l})=>e.jsx(C,{onClose:l,callback:c,projectName:s.projectTitle,label:"restore",message:`you want to restore ${s.projectTitle} project ?`})})};return e.jsxs("div",{className:"container-fluid pt-5",children:[e.jsx("div",{className:"row px-3 px-md-5 mb-3",children:e.jsxs("div",{className:"text-end d-flex justify-content-between align-items-center flex-column flex-md-row",children:[e.jsx(j,{title:"Dashboard",cssClass:"text-center blue-500 fs-4"}),e.jsx("div",{className:"d-flex gap-1 justify-content-between align-items-center",children:e.jsx(G,{type:"",cssClass:"btn btn-primary",label:"Add New Project",handlerChange:()=>a("/addproject")})})]})}),e.jsxs("div",{className:"row px-3 px-md-5 py-4",children:[e.jsx(j,{title:"Published projects",cssClass:"text-center fw-bolder mb-2 fs-5 text-uppercase green-900"}),e.jsx("hr",{className:"border-dark"}),L?e.jsx(b,{project:A,handleProjectDelete:w}):"Add new Project and publish "]}),B?e.jsxs("div",{className:"row p-5 pt-0",children:[e.jsx(j,{title:"Saved / Ready to publish",cssClass:"text-center fw-bolder pt-4 text-uppercase  mb-2 fs-5 green-900"}),e.jsx("hr",{className:"border-dark"}),e.jsx(b,{project:x,handleProjectDelete:w})]}):"",V?e.jsxs("div",{className:"row p-5 py-3 bg-gray-light",children:[e.jsx(j,{title:"Archive projects",cssClass:"text-center fw-bolder pt-4 text-uppercase  mb-2 fs-4 gray-900"}),e.jsx("hr",{className:"border-dark"}),e.jsx(b,{project:r,handleProjectDelete:F})]}):""]})};export{M as default};
