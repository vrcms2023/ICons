import{u as g,r as c,h as j,j as s,T as b,L as N,ab as i,B as _,c as y,d as P}from"./index-BWK7iHxT.js";import{E as v}from"./Error-B_8W099F.js";import{L as C}from"./Styled-Login-CHeHVSft.js";const E=()=>{const{register:a,handleSubmit:m}=g(),[u,l]=c.useState(!1),[t,n]=c.useState(!1),d=j(),w=async e=>{const x={current_password:e.current_password,new_password:e.new_password,re_new_password:e.re_new_password},f=JSON.stringify(x);try{(await y.post("/user/auth/users/set_password/",f)).status===204&&(l(!0),P.success("Password updated successfully "),setTimeout(()=>{d(i())},5e3))}catch(r){r.email?n(r.email[0]):n(r[0])}},h=()=>{},o=e=>{p()},p=()=>{l(!1),n(!1)};return s.jsx(C,{children:s.jsx("div",{className:"login",children:s.jsx("div",{className:"bg-white d-flex justify-content-center align-items-center flex-column",children:s.jsx("div",{className:"container",children:s.jsx("div",{className:"row d-flex flex-column justify-content-center align-items-center",children:s.jsxs("form",{onSubmit:m(w),className:"shadow-lg",children:[t?s.jsx("p",{className:"fw-bold",children:t&&s.jsx(v,{children:t})}):"",s.jsx(b,{title:"Change Password",cssClass:"text-center text-dark mb-4 fw-bold fs-4"}),u?s.jsxs(s.Fragment,{children:[s.jsx("div",{children:"Your password Updated successfully, login with new password"}),s.jsxs("div",{className:"mt-3",children:["Click here to login ?"," ",s.jsx(N,{onClick:d(i()),to:"/login",children:"Login"})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"currentPassord",className:"form-label text-dark fw-normal",children:"Current Password"}),s.jsx("input",{type:"password",...a("current_password",{required:!0}),required:!0,name:"current_password",onChange:o,className:"form-control",id:"signPassord"})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"signPassord",className:"form-label text-dark fw-normal",children:"New Password"}),s.jsx("input",{type:"password",...a("new_password",{required:!0}),required:!0,name:"new_password",onChange:o,className:"form-control",id:"signPassord"}),s.jsx("small",{className:"text-muted",children:"Passwords must be at least 6 characters."})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"signPassordRe",className:"form-label text-dark fw-normal",children:"Re-enter password"}),s.jsx("input",{type:"password",...a("re_new_password",{required:!0}),required:!0,name:"re_new_password",onChange:o,className:"form-control",id:"signPassordRe"})]}),s.jsx("div",{className:"d-grid gap-2 mt-4",children:s.jsx(_,{type:"submit",cssClass:"btn btn-lg btn-primary",handlerChange:h,label:"Reset Password"})})]})]})})})})})})};export{E as default};
