import{r as c,f as N,h as g,F as v,u as w,d as y,ar as C,af as k,j as e,T as E,L as x,B as R,as as F}from"./index-BWK7iHxT.js";import{E as h}from"./Error-B_8W099F.js";import{C as P}from"./CRSFToken-fXuQ3seS.js";import{L as S}from"./Styled-Login-CHeHVSft.js";const B=()=>{var u;const[m,l]=c.useState(null),{error:a,success:i}=N(s=>s.auth),n=g(),o=v(),{register:r,handleSubmit:f,formState:{errors:d}}=w();c.useEffect(()=>{i&&(y.success("Register successfully"),o("/login")),a&&l(a),n(C())},[o,i,a,n]),c.useEffect(()=>{k()},[]);const p=s=>{if(s.password!==s.re_password){l("Password mismatch");return}s.email=s.email.toLowerCase(),n(F(s))},t=s=>{j()},j=()=>{l(!1)},b=()=>{};return e.jsx(S,{children:e.jsxs("div",{className:"login",children:[e.jsx("div",{className:"text-center pt-4",children:e.jsx("button",{className:"btn btn-secondary",onClick:()=>o("/"),children:"Back to HPR Infra website"})}),e.jsx("div",{className:"d-flex justify-content-center align-items-center flex-column",children:e.jsxs("form",{onSubmit:f(p),className:"shadow-lg",children:[e.jsx(P,{}),e.jsx(E,{title:"Create / Register account",cssClass:"text-center text-dark mb-4 fs-4 fw-bold"}),e.jsxs("div",{className:"mb-3",children:[a&&e.jsx(h,{children:a}),m&&e.jsx(h,{children:m}),i&&e.jsxs("div",{children:["Your registration has been successful. You will receive an account activation email shortly."," "]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"userName",className:"form-label text-dark fw-normal",children:"User name"}),e.jsx("input",{type:"text",name:"userName",...r("userName",{required:!0}),className:"form-control",onChange:t,id:"userName","aria-describedby":"emailHelp","aria-invalid":d.userName?"true":"false"}),((u=d.userName)==null?void 0:u.type)==="required"&&e.jsx("p",{role:"alert",children:"userName is required"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"email",className:"form-label text-dark fw-normal",children:"Email"}),e.jsx("input",{type:"email",...r("email"),required:!0,name:"email",onChange:t,className:"form-control",id:"email","aria-describedby":"emailHelp"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"signPassord",className:"form-label text-dark fw-normal",children:"Password"}),e.jsx("input",{type:"password",...r("password"),required:!0,name:"password",onChange:t,className:"form-control",id:"signPassord"}),e.jsx("small",{className:"text-muted",children:"Passwords must be at least 6 characters."})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"signPassordRe",className:"form-label text-dark fw-normal",children:"Re-enter password"}),e.jsx("input",{type:"password",...r("re_password"),required:!0,onChange:t,name:"re_password",className:"form-control",id:"signPassordRe"})]}),e.jsxs("div",{className:"my-4 d-flex flex-column gap-1 loginLinks",children:[e.jsxs("div",{className:"mt-1",children:["Aleardy a User ? ",e.jsx(x,{to:"/login",children:"Login"})]}),e.jsxs("div",{className:"mt-1",children:["Not Activate your account ?",e.jsx(x,{to:"/resend_activation",children:" Activate"})]})]}),e.jsx("div",{className:"d-grid gap-2 mt-4",children:e.jsx(R,{type:"submit",cssClass:"btn btn-lg btn-primary",handlerChange:b,label:"Create"})})]})})]})})};export{B as default};
