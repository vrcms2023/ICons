import{f as p,h as j,u as g,F as N,r as l,an as b,af as c,ae as v,ao as w,ap as y,d as A,a2 as i,o as k,j as s,B as E,L as d,aq as L}from"./index-BWK7iHxT.js";import{E as S}from"./Error-B_8W099F.js";import{C}from"./CRSFToken-fXuQ3seS.js";import{L as P}from"./Styled-Login-CHeHVSft.js";import{A as F}from"./Ancher-Cr_S9HGk.js";const J=()=>{const{access:m,userInfo:e,error:n,permissions:u}=p(o=>o.auth),a=j(),{register:t,handleSubmit:h}=g(),r=N();l.useEffect(()=>{m&&a(b())},[m,a]),l.useEffect(()=>{c()},[]),l.useEffect(()=>{if(e){if(!v(e))return c(),r("/unauthorized");e.is_admin?a(y()):a(w(e.id)),A.success(`${e.userName} Login successfully `),i("email",e.email),i("userName",e.userName),i("userId",e.id),i("is_admin",JSON.parse(e.is_admin)),i("is_appAccess",JSON.parse(e.is_appAccess))}else k("email")&&c()},[e,a,r]),l.useEffect(()=>{u.length>0&&(r("/"),window.location.reload())},[u,r]);const f=o=>{a(L(o))},x=()=>{};return s.jsxs(P,{children:[s.jsx("div",{className:"text-center",children:s.jsx(F,{Ancherpath:"/",AncherClass:"btn btn-outline mt-5 w-auto",handleModel:"",AncherLabel:"",icon:"fa-home",iconCss:"fs-4"})}),s.jsx("div",{className:"login",children:s.jsx("div",{className:"d-flex justify-content-center align-items-center flex-column",children:s.jsxs("form",{onSubmit:h(f),className:"shadow",children:[s.jsx(C,{}),n?s.jsx("p",{className:"fw-bold",children:n&&s.jsx(S,{children:n})}):"",s.jsx("input",{type:"hidden",...t("csrfmiddlewaretoken"),name:"csrfmiddlewaretoken",value:"m6pDnuW9RPTEuK66x0H4oc09JSfyv6bD"}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"userName",className:"form-label text-dark fw-normal",children:"Email"}),s.jsx("input",{type:"text",...t("email"),name:"email",className:"form-control bg-light",id:"userName","aria-describedby":"emailHelp"})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"signPassord",className:"form-label text-dark fw-normal",children:"Password"}),s.jsx("input",{type:"password",...t("password"),name:"password",className:"form-control bg-light",id:"signPassord"})]}),s.jsx("div",{className:"d-grid gap-2 mt-4",children:s.jsx(E,{type:"submit",cssClass:"btn btn-lg btn-primary",handlerChange:x,label:"Login"})}),s.jsxs("div",{className:"my-4 d-flex flex-column gap-1 loginLinks",children:[s.jsx("div",{className:"",children:s.jsxs("small",{children:["Don't have an account ?"," ",s.jsxs(d,{to:"/register",className:"",children:["Sign Up"," "]})]})}),s.jsx("div",{className:"",children:s.jsxs("small",{children:["Forgot your Password ?"," ",s.jsx(d,{to:"/reset_password  ",children:"Reset Password "})]})}),s.jsx("div",{className:"",children:s.jsxs("small",{children:["Not Activate your account ?"," ",s.jsx(d,{to:"/resend_activation",children:"Activate"})]})})]})]})})})]})};export{J as default};
